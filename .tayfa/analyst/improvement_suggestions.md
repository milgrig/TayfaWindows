# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Tayfa ‚Äî –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-02-18
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** Claude (–≤–Ω–µ—à–Ω–∏–π –æ–±–∑–æ—Ä)

---

## 1. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ: JSON-—Ñ–∞–π–ª—ã –∫–∞–∫ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `tasks.json`, `backlog.json`, `agent_failures.json` –∏ —Ç.–¥. –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∑–∞–ø–∏—Å–∏. –ü—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –≤–æ–∑–º–æ–∂–µ–Ω race condition ‚Äî –¥–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–∏—Ç–∞—é—Ç —Ñ–∞–π–ª –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –æ–¥–∏–Ω –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å `filelock` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –∏–ª–∏ `asyncio.Lock` –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –≤ JSON
- –ò–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ **SQLite** —á–µ—Ä–µ–∑ `aiosqlite` ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å –±–æ–ª—å—à–∏–º –≤—ã–∏–≥—Ä—ã—à–µ–º –≤ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
- –°—Ö–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: —Ç–µ –∂–µ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø—Ä–æ—Å—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö SQLite

```python
# –ü—Ä–∏–º–µ—Ä –∑–∞–º–µ–Ω—ã —Å aiosqlite
import aiosqlite

async def get_task(task_id: str):
    async with aiosqlite.connect("tayfa.db") as db:
        row = await db.execute("SELECT * FROM tasks WHERE id = ?", (task_id,))
        return await row.fetchone()
```

---

## 2. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### üü° Polling –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 1000ms –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á. –ü—Ä–∏ 10 –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö ‚Äî 10 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å polling –Ω–∞ **WebSocket** –∏–ª–∏ **Server-Sent Events (SSE)**.

```python
# app.py ‚Äî –¥–æ–±–∞–≤–∏—Ç—å SSE endpoint
from fastapi.responses import StreamingResponse
import asyncio

@app.get("/api/events")
async def event_stream():
    async def generator():
        while True:
            # push —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
            if task_changed_event.is_set():
                yield f"data: {json.dumps(get_tasks_snapshot())}\n\n"
                task_changed_event.clear()
            await asyncio.sleep(0.1)
    return StreamingResponse(generator(), media_type="text/event-stream")
```

---

## 3. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò OBSERVABILITY

### üü° –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏ –≤ `tayfa_server.log` –∏ `claude_api.log` ‚Äî –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –¢—Ä—É–¥–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ task_id, agent, sprint.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å **structlog** –∏–ª–∏ `logging` —Å JSON-—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–º:

```python
import structlog

log = structlog.get_logger()

log.info("task_started", task_id="T043", agent="developer", sprint="S030")
log.error("agent_timeout", task_id="T043", agent="developer", attempt=2)
```

### üü° –ù–µ—Ç –º–µ—Ç—Ä–∏–∫

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `/metrics` endpoint –≤ Prometheus-—Ñ–æ—Ä–º–∞—Ç–µ (—á–µ—Ä–µ–∑ `prometheus-fastapi-instrumentator`):
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø—É
- –†–∞—Å—Ö–æ–¥ –±—é–¥–∂–µ—Ç–∞

---

## 4. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### üî¥ –°–µ–∫—Ä–µ—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `kok/secret_settings.json` —Å–æ–¥–µ—Ä–∂–∏—Ç GitHub token –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Windows Credential Manager** –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `.env` —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `python-dotenv`
- –î–æ–±–∞–≤–∏—Ç—å `secret_settings.json` –≤ `.gitignore` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω!)

```python
# settings_manager.py
import os
from dotenv import load_dotenv
load_dotenv()
GITHUB_TOKEN = os.getenv("GITHUB_TOKEN")
```

### üü° –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ API

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ `/api/*` endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ï—Å–ª–∏ –ø–æ—Ä—Ç 8008 –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–µ—Ç–∏ ‚Äî –ª—é–±–æ–π –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–¥–∞—á–∞–º–∏.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—É—é API-key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key` –∏–ª–∏ `Authorization: Bearer`.

---

## 5. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### üü° –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è claude_api.py

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥—É–ª—å `claude_api.py` (–∫–ª—é—á–µ–≤–æ–π –º–æ—Å—Ç –∫ Claude CLI) –Ω–µ –∏–º–µ–µ—Ç unit-—Ç–µ—Å—Ç–æ–≤. –õ–æ–≥–∏–∫–∞ fallback –º–æ–¥–µ–ª–µ–π (opus ‚Üí sonnet ‚Üí haiku) –Ω–µ –ø–æ–∫—Ä—ã—Ç–∞.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `test_claude_api.py` —Å –º–æ–∫–∞–º–∏ subprocess:

```python
@pytest.fixture
def mock_claude_subprocess(monkeypatch):
    def mock_run(cmd, **kwargs):
        return MockProcess(stdout='{"result": "done", "cost_usd": 0.01}')
    monkeypatch.setattr("subprocess.run", mock_run)
```

### üü° –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è git_manager.py

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –¢–µ—Å—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ —á–µ—Ä–µ–∑ `tmp_path` fixture.

### üü¢ –î–æ–±–∞–≤–∏—Ç—å coverage threshold

–í `pytest.ini` –¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –ø–æ–∫—Ä—ã—Ç–∏—è:

```ini
addopts = --cov=kok --cov-fail-under=70
```

---

## 6. FRONTEND

### üü° –û–¥–∏–Ω –æ–≥—Ä–æ–º–Ω—ã–π HTML-—Ñ–∞–π–ª

**–ü—Ä–æ–±–ª–µ–º–∞:** `index.html` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å JS, CSS –∏ HTML –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ. –í–µ—Ä–æ—è—Ç–Ω–æ 2000+ —Å—Ç—Ä–æ–∫, –∫—Ä–∞–π–Ω–µ —Å–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏:
```
static/
  index.html
  css/
    themes.css
    kanban.css
  js/
    api.js          # fetch-–æ–±—ë—Ä—Ç–∫–∏
    tasks.js        # task rendering
    sprints.js      # sprint management
    settings.js     # settings page
    chat.js         # chat page
```

–ò–ª–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å **Vue 3 CDN** ‚Äî –±–µ–∑ —Å–±–æ—Ä—â–∏–∫–∞, –Ω–æ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:
```html
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
```

### üü¢ –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** Browser Notifications API –∏–ª–∏ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å / –∞–≥–µ–Ω—Ç —É–ø–∞–ª.

---

## 7. –ê–ì–ï–ù–¢–´ –ò AI-–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### üü° –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–∞ –∞–≥–µ–Ω—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω –∞–≥–µ–Ω—Ç `developer` –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å—Ä–∞–∑—É N –∑–∞–¥–∞—á –µ—Å–ª–∏ –≤ —Å–ø—Ä–∏–Ω—Ç–µ –º–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö. Claude CLI –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `agent_semaphore` ‚Äî –º–∞–∫—Å–∏–º—É–º 1 –∑–∞–¥–∞—á–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

```python
agent_locks: Dict[str, asyncio.Semaphore] = {}

async def run_task_with_agent(agent_name: str, ...):
    if agent_name not in agent_locks:
        agent_locks[agent_name] = asyncio.Semaphore(1)
    async with agent_locks[agent_name]:
        return await execute_agent(agent_name, ...)
```

### üü° –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ —Ä–∞—Å—Ç—ë—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** `chat_history.json` –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ë–æ–ª—å—à–∞—è –∏—Å—Ç–æ—Ä–∏—è = –¥–æ—Ä–æ–≥–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç = —Ä–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å TTL-–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –≤ `chat_history_archive/` —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –∏–ª–∏ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ N –∑–∞–ø–∏—Å–µ–π.

### üü¢ –î–æ–±–∞–≤–∏—Ç—å "–≥–æ—Ä—è—á—É—é" –∑–∞–º–µ–Ω—É –º–æ–¥–µ–ª–∏

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª–∏—Ç—å –º–µ–Ω—è—Ç—å –º–æ–¥–µ–ª—å –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ UI –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ `employees.json`.

---

## 8. –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### üü° –ù–µ—Ç health-check –¥–ª—è Claude API —Å–µ—Ä–≤–µ—Ä–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `claude_api.py` (–ø–æ—Ä—Ç 8788) —É–ø–∞–ª, `app.py` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –∫ –Ω–µ–º—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è, –∑–∞–¥–∞—á–∏ –≤–∏—Å—è—Ç –≤ `in_progress`.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:**
- Startup check ‚Äî –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `app.py` –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 8788
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç `claude_api.py` –µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞

```python
# –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ app.py
async def check_claude_api_health():
    try:
        async with httpx.AsyncClient() as client:
            r = await client.get("http://localhost:8788/health", timeout=5)
            if r.status_code != 200:
                raise RuntimeError("Claude API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω")
    except Exception as e:
        logger.critical(f"Claude API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {e}")
        # –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ UI
```

### üü° –ù–µ—Ç backup JSON-—Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `tasks.json` –ø–æ–≤—Ä–µ–¥–∏—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∞–≤–∞—Ä–∏–π–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏), –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å—å—é —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `tasks.json.bak`:

```python
def save_tasks(tasks):
    shutil.copy("tasks.json", "tasks.json.bak")
    with open("tasks.json", "w") as f:
        json.dump(tasks, f, indent=2)
```

### üü¢ Docker Compose

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `docker-compose.yml` –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –ª—é–±–æ–π –º–∞—à–∏–Ω–µ:

```yaml
version: "3.9"
services:
  claude-api:
    build: .
    command: uvicorn kok.claude_api:app --host 0.0.0.0 --port 8788
    ports: ["8788:8788"]

  orchestrator:
    build: .
    command: python kok/app.py
    ports: ["8008:8008"]
    depends_on: [claude-api]
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
```

---

## 9. DEVELOPER EXPERIENCE

### üü¢ Makefile / task runner

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `Makefile` –∏–ª–∏ `pyproject.toml [tool.taskipy]` –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

```makefile
.PHONY: run test lint

run:
	python kok/app.py

test:
	pytest kok/tests/ -v --ignore=kok/tests/test_e2e_*

test-e2e:
	pytest kok/tests/ -m e2e --headed

lint:
	ruff check kok/
	mypy kok/

format:
	black kok/
```

### üü¢ Type hints –∏ mypy

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `app.py` –∏ `task_manager.py` –Ω–µ –∏–º–µ—é—Ç type hints.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å `mypy` –≤ CI:

```python
# –ë—ã–ª–æ:
def get_task(task_id):
    ...

# –°—Ç–∞–ª–æ:
def get_task(task_id: str) -> Optional[Task]:
    ...
```

### üü¢ Pre-commit hooks —Ä–∞—Å—à–∏—Ä–∏—Ç—å

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤ `.pre-commit-config.yaml`:
- `ruff` ‚Äî –±—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä
- `mypy` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- `detect-secrets` ‚Äî –ø–æ–∏—Å–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

---

## 10. –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò

### üí° Dashboard —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π —Å–ø—Ä–∏–Ω—Ç–æ–≤

**–ß—Ç–æ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ ‚Äî velocity, burndown chart, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–¥–∞—á, —Ä–∞—Å—Ö–æ–¥ –±—é–¥–∂–µ—Ç–∞ –ø–æ –∞–≥–µ–Ω—Ç–∞–º.

**–ö–∞–∫:** Chart.js + –Ω–æ–≤—ã–π `/api/analytics` endpoint –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –∏–∑ sprint_reports/.

### üí° –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram/Slack

**–ß—Ç–æ:** –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–ø—Ä–∏–Ω—Ç–∞, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –∞–≥–µ–Ω—Ç–∞ ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä.

**–ö–∞–∫:** Webhook + –ø—Ä–æ—Å—Ç–æ–π handler –≤ `notifications.py`.

### üí° –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (cron-like)

**–ß—Ç–æ:** –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, "–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç—á—ë—Ç".

**–ö–∞–∫:** `apscheduler` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ + UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

### üí° –†–æ–ª–µ–≤–æ–π —á–µ—Ä–Ω–æ–≤–∏–∫ (multi-agent brainstorm)

**–ß—Ç–æ:** –û–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∞–≥–µ–Ω—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä boss + analyst + developer), –æ—Ç–≤–µ—Ç—ã –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è.

**–ö–∞–∫:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ `asyncio.gather()`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –æ–¥–Ω–æ–º —á–∞—Ç-–æ–∫–Ω–µ.

### üí° –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–¥–∞—á

**–ß—Ç–æ:** –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞/–±—ç–∫–ª–æ–≥–∞ –≤ CSV, Markdown –∏–ª–∏ JIRA-—Ñ–æ—Ä–º–∞—Ç.

**–ö–∞–∫:** –ü—Ä–æ—Å—Ç–æ–π `/api/export?format=csv&sprint=S030` endpoint.

---

## –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ |
|-----------|--------|-----------|---------|
| üî¥ P1 | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ JSON / –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ SQLite | –°—Ä–µ–¥–Ω—è—è | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å |
| üî¥ P1 | –°–µ–∫—Ä–µ—Ç—ã –≤ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö | –ù–∏–∑–∫–∞—è | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| üü° P2 | WebSocket/SSE –≤–º–µ—Å—Ç–æ polling | –°—Ä–µ–¥–Ω—è—è | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| üü° P2 | Health-check Claude API —Å–µ—Ä–≤–µ—Ä–∞ | –ù–∏–∑–∫–∞—è | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å |
| üü° P2 | Backup JSON –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é | –ù–∏–∑–∫–∞—è | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å |
| üü° P2 | –¢–µ—Å—Ç—ã –¥–ª—è claude_api.py | –°—Ä–µ–¥–Ω—è—è | –ö–∞—á–µ—Å—Ç–≤–æ |
| üü° P2 | Agent semaphore (1 –∑–∞–¥–∞—á–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∞) | –ù–∏–∑–∫–∞—è | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å |
| üü¢ P3 | –†–∞–∑–±–∏—Ç—å index.html –Ω–∞ –º–æ–¥—É–ª–∏ | –í—ã—Å–æ–∫–∞—è | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
| üü¢ P3 | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ù–∏–∑–∫–∞—è | Observability |
| üü¢ P3 | Makefile + type hints | –ù–∏–∑–∫–∞—è | DX |
| üí° P4 | Dashboard —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ | –í—ã—Å–æ–∫–∞—è | –¶–µ–Ω–Ω–æ—Å—Ç—å |
| üí° P4 | Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –°—Ä–µ–¥–Ω—è—è | –¶–µ–Ω–Ω–æ—Å—Ç—å |
| üí° P4 | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á | –í—ã—Å–æ–∫–∞—è | –¶–µ–Ω–Ω–æ—Å—Ç—å |

---

*–§–∞–π–ª —Å–æ–∑–¥–∞–Ω Claude (external analyst) –¥–ª—è –∫–æ–º–∞–Ω–¥—ã Tayfa*
